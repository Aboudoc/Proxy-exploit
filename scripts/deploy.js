const { ethers } = require("hardhat")
const hre = require("hardhat")

async function main() {
    const WalletImplementation = await hre.ethers.getContractFactory("WalletImplementation")
    const walletImplementation = await WalletImplementation.deploy()

    await walletImplementation.deployed()

    console.log(`Wallet Implementation address: ${walletImplementation.address}`)

    const UpgradableWallet = await hre.ethers.getContractFactory("UpgradableWallet")
    const upgradableWallet = await UpgradableWallet.deploy(walletImplementation.address, { value: 1 })

    await upgradableWallet.deployed()
    const upgradableWalletBalance = await ethers.provider.getBalance(upgradableWallet.address)

    console.log(`Upgradable Wallet address: ${upgradableWallet.address}`)
    console.log(`Upgradable Wallet balance: ${upgradableWalletBalance}`)
}

main().catch((error) => {
    console.error(error)
    process.exitCode = 1
})
